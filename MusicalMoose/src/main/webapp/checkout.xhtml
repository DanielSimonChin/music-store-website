<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <head>

        <title>Musical Moose</title>
        <!--<h:outputStylesheet library="css" name="frontdoor.css" />-->

    </head>

    <h:body>
        <ui:composition template="/templates/common.xhtml">
            <ui:define name="content">
                <link rel="stylesheet" href="checkout.css"/>
                <h1 id="title">Shopping Cart</h1>
                <div id="info1" class="container-info">
                    <form>

                        <div class="row">
                            <h3>Payment</h3>
                            <label for="fname">Select Card</label>
                            <div class="icon-container">
                                <label for="mastercardcheck">
                                    <img class="card" src="./icons/cc-mastercard-brands.svg"/>
                                </label>
                                <label for="visacheck">
                                    <img class="card" src="./icons/cc-visa-brands.svg"/>
                                </label>
                                <br></br>
                                <input type="radio" id="mastercardcheck" name="cardcheck" value="mastercard"/>
                                <input type="radio" id="visacheck" name="cardcheck" value="visa"/>
                            </div>
                            <label for="cname">Name On Card</label>
                            <input type="text" id="cname" name="cardname" placeholder="Mike Smith"/>
                            <br></br>
                            <br></br>
                            <label for="ccnum">Credit Card Number</label>
                            <input type="text" id="ccnum" name="cardnumber" placeholder="XXXX-XXXX-XXXX-XXXX"/>
                            <br></br>
                            <br></br>
                            <label for="expmonth">Expiration Month</label>
                            <input type="text" id="expmonth" name="expmonth" placeholder="November"/>
                            <br></br>
                            <br></br>
                            <label for="expyear">Expiration Year</label>
                            <input type="text" id="expyear" name="expyear" placeholder="2021"/>

                        </div>
                        <br></br>
                        <input type="submit" value="Purchase" class="btn-sub"/>
                    </form>
                </div>

                <div id="info2" class="container-info">
                    <h4>Cart</h4>
                    <div id="scrollcart">
                        <ui:repeat value="#{shoppingCartController.getShoppingCartList()}" var="cartItems">
                            <h:form>
<!--                                <c:choose>
                                    <c:when test="$ {cartItems.isAlbum}">
                                        <h:commandLink value="# {cartItems.title}" action="# {albumJpaController.searchSingleAlbum(cartItems.id)}" />
                                            <h:graphicImage value="album_covers/# {cartItems.albumimagefilenamesmall}" />
                                        </h:commandLink>
                                        album
                                    </c:when>
                                    <c:otherwise>
                                        <h:commandLink value="$ {cartItems.title}" action="# {musicTrackJpaController.selectSingleTrack(cartItems.id)}" />
                                            <h:graphicImage value="album_covers/# {cartItems.albumimagefilenamesmall}" />
                                            <h:button value="hi"></h:button>
                                        </h:commandLink>
                                        track
                                    </c:otherwise>
                                </c:choose>-->

<!--                            <c:if test="$ {cartItems.isAlbum}">
                                    <h:commandLink value="# {cartItems.title}" action="# {albumJpaController.searchSingleAlbum(cartItems.id)}" />
                                        <h:graphicImage value="album_covers/# {cartItems.albumimagefilenamesmall}" />
                                    </h:commandLink>
                                    album
                                </c:if>
                                <c:if test="$ {cartItems.isAlbum}">
                                    <h:commandLink value="$ {cartItems.title}" action="# {musicTrackJpaController.selectSingleTrack(cartItems.id)}" />
                                        <h:graphicImage value="album_covers/# {cartItems.albumimagefilenamesmall}" />
                                        <h:button value="hi"></h:button>
                                    </h:commandLink>
                                    track
                                </c:if>-->
                                <ui:fragment rendered="#{cartItems.isAlbum}">
                                    <h:commandLink value="#{cartItems.title} - Album: $#{cartItems.price}" action="#{albumJpaController.searchSingleAlbum(cartItems.id)}">
                                        <!--<h:graphicImage value="album_covers/# {cartItems.imgNameSmall}" />-->
                                    </h:commandLink>
                                    <h:commandLink action="#{shoppingCartController.deleteCartItem(cartItems)}" >
                                        <h:graphicImage value="icons/delete-cart.png" />
                                    </h:commandLink>
                                </ui:fragment>

                                <ui:fragment rendered="#{not cartItems.isAlbum}">
                                    <h:commandLink value="#{cartItems.title} - Track: $#{cartItems.price}" action="#{musicTrackJpaController.selectSingleTrack(cartItems.id)}">
                                        <!--<h:graphicImage value="album_covers/# {cartItems.imgNameSmall}" />-->
                                    </h:commandLink>
                                    <h:commandLink action="#{shoppingCartController.deleteCartItem(cartItems)}" >
                                        <h:graphicImage value="icons/delete-cart.png" />
                                    </h:commandLink>
                                </ui:fragment>
                            </h:form>
                        </ui:repeat>
                    </div>

                    <p>Total: <span class="price"><b>$#{shoppingCartController.calculateTotal()}</b></span></p>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>

</html>